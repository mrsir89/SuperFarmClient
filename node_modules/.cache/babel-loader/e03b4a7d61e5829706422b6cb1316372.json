{"ast":null,"code":"var _jsxFileName = \"C:\\\\superfarmclient\\\\SuperFarmClientTest4\\\\SuperFarmClient\\\\src\\\\component\\\\board\\\\reviewBoard\\\\AddReview.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Actions } from '../../../actions/index'; // import { ActionTypes } from '../../contants';\n\nimport { withRouter } from 'react-router-dom';\nimport { ActionTypes } from '../../../contants';\n\nclass AddReview extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._onClickAction = e => {\n      const uploadFileReview = this.props.uploadFileReview;\n      const reviewBoard = {\n        productBoardNum: this.state.productBoardNum,\n        customerId: this.state.customerId,\n        reviewBoardTitle: this.state.reviewBoardTitle,\n        reviewBoardContent: this.state.reviewBoardContent,\n        reviewBoardRating: this.state.reviewBoardRating\n      };\n      const addReview = this.props.addReview;\n      addReview(reviewBoard).then(response => {\n        if (response.type === ActionTypes.ADD_REVIEW_SUCCESS) {\n          console.log(response, ' 성공하고 data');\n          let reviewBoardNum = response.payload.data.reviewBoardNum;\n          console.log('AddReview Response 확인 ', response);\n          uploadFileReview(reviewBoardNum, this.state.reviewFiles).then(response => {\n            if (response.type === ActionTypes.UPLOADFILEREVIEW_SUCCESS) {\n              console.log(response.type);\n              window.close();\n            }\n          });\n        } else console.log('Add 실패 한다~!!');\n      }); //window.close()\n    };\n\n    const _reviewBoard = this.props.reviewBoard;\n    const userDetails = this.props.userDetails;\n    console.log(this.props, 'constructor AddReviewBoard');\n    this.state = {\n      productBoardNum: 5,\n      customerId: userDetails.userId,\n      reviewBoardTitle: '',\n      reviewBoardContent: '',\n      reviewBoardRating: 3,\n      reviewFiles: []\n    };\n    console.log(this.props, ' props 확인 넘어 오는 match 값도 확인');\n    this._onChangeInput = this._onChangeInput.bind(this);\n    this._onClickAction = this._onClickAction.bind(this);\n    this._onChnagereviewBoardRating = this._onChnagereviewBoardRating.bind(this);\n    this._onChangeFileUpload = this._onChangeFileUpload.bind(this);\n  }\n\n  _onChangeInput(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    console.log(target.name, ' name');\n    console.log(value);\n    this.setState({\n      [name]: value\n    });\n    console.log(this.state, 'this state');\n  }\n\n  _onChnagereviewBoardRating(event) {\n    console.log('eventddddddddddd', event.target.value);\n    let rating = event.target.value;\n\n    if (rating > 5) {\n      rating = 5;\n      alert(' 너무 큰수를 입력하여서 5로 초기화 됨니다.');\n      this.setState({\n        reviewBoardRating: rating\n      });\n    } else {\n      this.setState({\n        reviewBoardRating: rating\n      });\n    }\n  }\n\n  _onChangeFileUpload(event) {\n    console.log(event.target);\n    this.setState({\n      reviewFiles: event.target.files[0]\n    });\n    console.log('onChagneFileUpload 실행', this.state.reviewFiles);\n  }\n\n  render() {\n    console.log('render에서 props 찍어보기', this.props);\n    return React.createElement(\"div\", {\n      className: \"container\",\n      role: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Review \\uAC8C\\uC2DC\\uD310\"), React.createElement(\"form\", {\n      onSubmit: this._onClickAction,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"\\uC81C\\uBAA9\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"reviewBoardTitle\",\n      onChange: this._onChangeInput,\n      placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD574 \\uC8FC\\uC138\\uC694\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"\\uC791\\uC131\\uC790\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"http://localhost:8080/storage/files/0ed289c878d0d08a018e1602369e8adf4bc707206bcc40b95ee48fe37a70ea4d\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, this.state.customerId, \" \"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"number\",\n      min: \"1\",\n      max: \"5\",\n      name: \"reviewBoardRating\",\n      onChange: this._onChnagereviewBoardRating,\n      className: \"form-control\",\n      placeholder: \"\\uBCC4\\uC810\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"\\uC774\\uBBF8\\uC9C0 \\uC62C\\uB9AC\\uAE30\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      accept: \".jpg, .jpeg, .png, .bmp\",\n      name: \"reviewBoardRating\",\n      file: this.state.reviewFiles,\n      onChange: this._onChangeFileUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"\\uB0B4\\uC6A9\"), React.createElement(\"textarea\", {\n      className: \"form-control\",\n      rows: \"5\",\n      name: \"reviewBoardContent\",\n      id: \"content\",\n      onChange: this._onChangeInput,\n      placeholder: \"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD574 \\uC8FC\\uC138\\uC694\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"button\",\n      className: \"btn btn-sm btn-primary\",\n      name: \"submit\",\n      value: \"\\uC800\\uC7A5\",\n      onClick: this._onClickAction,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"reset\",\n      className: \"btn btn-sm btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"\\uBAA9\\uB85D\"))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const userDetails = state.auth.userDetails;\n  const reviewBoard = state.board.reviewBoard;\n  console.log(state, ' mapStateToProps');\n  console.log(reviewBoard, ' <------------  ReviewBoard ');\n  console.log(userDetails, ' <----------- userDetails');\n  console.log(userDetails.userId, ' <----------- userId');\n  return {\n    userDetails,\n    reviewBoard\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  addReview: reviewBoard => dispatch(Actions.addReview(reviewBoard)),\n  uploadFileReview: (uploadInfo, file) => dispatch(Actions.uploadFileReview(uploadInfo, file))\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(AddReview));","map":{"version":3,"sources":["C:\\superfarmclient\\SuperFarmClientTest4\\SuperFarmClient\\src\\component\\board\\reviewBoard\\AddReview.js"],"names":["React","connect","Actions","withRouter","ActionTypes","AddReview","Component","constructor","props","_onClickAction","e","uploadFileReview","reviewBoard","productBoardNum","state","customerId","reviewBoardTitle","reviewBoardContent","reviewBoardRating","addReview","then","response","type","ADD_REVIEW_SUCCESS","console","log","reviewBoardNum","payload","data","reviewFiles","UPLOADFILEREVIEW_SUCCESS","window","close","userDetails","userId","_onChangeInput","bind","_onChnagereviewBoardRating","_onChangeFileUpload","event","target","value","name","setState","rating","alert","files","render","mapStateToProps","auth","board","mapDispatchToProps","dispatch","uploadInfo","file"],"mappings":";AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,wBAAxB,C,CACA;;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,WAAT,QAA4B,mBAA5B;;AAKA,MAAMC,SAAN,SAAwBL,KAAK,CAACM,SAA9B,CAAwC;AAEtCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAEjB,UAAMA,KAAN;;AAFiB,SAsBnBC,cAtBmB,GAsBHC,CAAD,IAAM;AAAA,YACXC,gBADW,GACS,KAAKH,KADd,CACXG,gBADW;AAEnB,YAAMC,WAAW,GAAG;AAClBC,QAAAA,eAAe,EAAE,KAAKC,KAAL,CAAWD,eADV;AAElBE,QAAAA,UAAU,EAAE,KAAKD,KAAL,CAAWC,UAFL;AAGlBC,QAAAA,gBAAgB,EAAE,KAAKF,KAAL,CAAWE,gBAHX;AAIlBC,QAAAA,kBAAkB,EAAE,KAAKH,KAAL,CAAWG,kBAJb;AAKlBC,QAAAA,iBAAiB,EAAE,KAAKJ,KAAL,CAAWI;AALZ,OAApB;AAFmB,YASXC,SATW,GASG,KAAKX,KATR,CASXW,SATW;AAWnBA,MAAAA,SAAS,CAACP,WAAD,CAAT,CAAuBQ,IAAvB,CAA4BC,QAAQ,IAAG;AACrC,YAAGA,QAAQ,CAACC,IAAT,KAAgBlB,WAAW,CAACmB,kBAA/B,EAAkD;AAChDC,UAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ,EAAqB,YAArB;AACA,cAAIK,cAAc,GAAGL,QAAQ,CAACM,OAAT,CAAiBC,IAAjB,CAAsBF,cAA3C;AACAF,UAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAqCJ,QAArC;AACAV,UAAAA,gBAAgB,CAACe,cAAD,EAAgB,KAAKZ,KAAL,CAAWe,WAA3B,CAAhB,CAAwDT,IAAxD,CAA6DC,QAAQ,IAAG;AACtE,gBAAGA,QAAQ,CAACC,IAAT,KAAkBlB,WAAW,CAAC0B,wBAAjC,EAA0D;AACxDN,cAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAQ,CAACC,IAArB;AACAS,cAAAA,MAAM,CAACC,KAAP;AACD;AACF,WALD;AAMD,SAVD,MAWAR,OAAO,CAACC,GAAR,CAAY,cAAZ;AACD,OAbD,EAXmB,CAyBlB;AAEF,KAjDkB;;AAAA,UAGTb,YAHS,GAGO,KAAKJ,KAHZ,CAGTI,WAHS;AAAA,UAITqB,WAJS,GAIO,KAAKzB,KAJZ,CAITyB,WAJS;AAKjBT,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKjB,KAAjB,EAAwB,4BAAxB;AACA,SAAKM,KAAL,GAAa;AACXD,MAAAA,eAAe,EAAE,CADN;AAEXE,MAAAA,UAAU,EAAEkB,WAAW,CAACC,MAFb;AAGXlB,MAAAA,gBAAgB,EAAE,EAHP;AAIXC,MAAAA,kBAAkB,EAAE,EAJT;AAKXC,MAAAA,iBAAiB,EAAE,CALR;AAMXW,MAAAA,WAAW,EAAC;AAND,KAAb;AASAL,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKjB,KAAjB,EAAwB,6BAAxB;AACA,SAAK2B,cAAL,GAAsB,KAAKA,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAK3B,cAAL,GAAsB,KAAKA,cAAL,CAAoB2B,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKC,0BAAL,GAAkC,KAAKA,0BAAL,CAAgCD,IAAhC,CAAqC,IAArC,CAAlC;AACA,SAAKE,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBF,IAAzB,CAA8B,IAA9B,CAA3B;AACD;;AA8BDD,EAAAA,cAAc,CAACI,KAAD,EAAQ;AAEpB,UAAMC,MAAM,GAAGD,KAAK,CAACC,MAArB;AACA,UAAMC,KAAK,GAAGD,MAAM,CAACC,KAArB;AACA,UAAMC,IAAI,GAAGF,MAAM,CAACE,IAApB;AAEAlB,IAAAA,OAAO,CAACC,GAAR,CAAYe,MAAM,CAACE,IAAnB,EAAyB,OAAzB;AACAlB,IAAAA,OAAO,CAACC,GAAR,CAAYgB,KAAZ;AAEA,SAAKE,QAAL,CAAc;AACZ,OAACD,IAAD,GAAQD;AADI,KAAd;AAIAjB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAjB,EAAwB,YAAxB;AACD;;AACDuB,EAAAA,0BAA0B,CAACE,KAAD,EAAQ;AAChCf,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCc,KAAK,CAACC,MAAN,CAAaC,KAA7C;AACA,QAAIG,MAAM,GAAGL,KAAK,CAACC,MAAN,CAAaC,KAA1B;;AACA,QAAIG,MAAM,GAAG,CAAb,EAAgB;AACdA,MAAAA,MAAM,GAAG,CAAT;AACAC,MAAAA,KAAK,CAAC,2BAAD,CAAL;AACA,WAAKF,QAAL,CAAc;AACZzB,QAAAA,iBAAiB,EAAC0B;AADN,OAAd;AAGD,KAND,MAMO;AACL,WAAKD,QAAL,CAAc;AACZzB,QAAAA,iBAAiB,EAAC0B;AADN,OAAd;AAGD;AACF;;AACDN,EAAAA,mBAAmB,CAACC,KAAD,EAAO;AACxBf,IAAAA,OAAO,CAACC,GAAR,CAAYc,KAAK,CAACC,MAAlB;AACA,SAAKG,QAAL,CAAc;AACZd,MAAAA,WAAW,EAACU,KAAK,CAACC,MAAN,CAAaM,KAAb,CAAmB,CAAnB;AADA,KAAd;AAGAtB,IAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAoC,KAAKX,KAAL,CAAWe,WAA/C;AACD;;AAEDkB,EAAAA,MAAM,GAAG;AACPvB,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmC,KAAKjB,KAAxC;AACA,WAEE;AAAK,MAAA,SAAS,EAAC,WAAf;AAA2B,MAAA,IAAI,EAAC,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADF,EAEE;AAAM,MAAA,QAAQ,EAAE,KAAKC,cAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAEE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,SAAS,EAAC,cAA7B;AAA4C,MAAA,IAAI,EAAC,kBAAjD;AACE,MAAA,QAAQ,EAAE,KAAK0B,cADjB;AACiC,MAAA,WAAW,EAAC,0DAD7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,EAOE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,GAAG,EAAE,sGAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAKrB,KAAL,CAAWC,UAAf,MAFF,CAFF,CAPF,EAeE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,GAAG,EAAC,GAAzB;AAA6B,MAAA,GAAG,EAAC,GAAjC;AAAqC,MAAA,IAAI,EAAC,mBAA1C;AAA8D,MAAA,QAAQ,EAAE,KAAKsB,0BAA7E;AACE,MAAA,SAAS,EAAC,cADZ;AAC2B,MAAA,WAAW,EAAC,mDADvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAfF,EAoBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CADF,CApBF,EAuBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,MAAM,EAAC,yBAA1B;AAAoD,MAAA,IAAI,EAAC,mBAAzD;AACG,MAAA,IAAI,EAAE,KAAKvB,KAAL,CAAWe,WADpB;AACgC,MAAA,QAAQ,EAAE,KAAKS,mBAD/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAvBF,EA4BE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAEE;AAAU,MAAA,SAAS,EAAC,cAApB;AAAmC,MAAA,IAAI,EAAC,GAAxC;AAA4C,MAAA,IAAI,EAAC,oBAAjD;AAAsE,MAAA,EAAE,EAAC,SAAzE;AACE,MAAA,QAAQ,EAAE,KAAKH,cADjB;AACiC,MAAA,WAAW,EAAC,0DAD7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CA5BF,EAkCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,SAAS,EAAC,wBAA/B;AACE,MAAA,IAAI,EAAC,QADP;AACgB,MAAA,KAAK,EAAC,cADtB;AAC2B,MAAA,OAAO,EAAE,KAAK1B,cADzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAGE;AAAQ,MAAA,IAAI,EAAC,OAAb;AAAqB,MAAA,SAAS,EAAC,wBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHF,CAlCF,CAFF,CAFF;AA8CD;;AA1IqC;;AA6IxC,MAAMuC,eAAe,GAAIlC,KAAD,IAAW;AAAA,QAEzBmB,WAFyB,GAETnB,KAAK,CAACmC,IAFG,CAEzBhB,WAFyB;AAAA,QAGzBrB,WAHyB,GAGTE,KAAK,CAACoC,KAHG,CAGzBtC,WAHyB;AAIjCY,EAAAA,OAAO,CAACC,GAAR,CAAYX,KAAZ,EAAmB,kBAAnB;AAEAU,EAAAA,OAAO,CAACC,GAAR,CAAYb,WAAZ,EAAyB,8BAAzB;AACAY,EAAAA,OAAO,CAACC,GAAR,CAAYQ,WAAZ,EAAyB,2BAAzB;AACAT,EAAAA,OAAO,CAACC,GAAR,CAAYQ,WAAW,CAACC,MAAxB,EAAgC,sBAAhC;AAEA,SAAO;AACLD,IAAAA,WADK;AAELrB,IAAAA;AAFK,GAAP;AAKD,CAfD;;AAkBA,MAAMuC,kBAAkB,GAAIC,QAAD,KAAe;AACxCjC,EAAAA,SAAS,EAAGP,WAAD,IAAiBwC,QAAQ,CAAClD,OAAO,CAACiB,SAAR,CAAkBP,WAAlB,CAAD,CADI;AAExCD,EAAAA,gBAAgB,EAAC,CAAC0C,UAAD,EAAYC,IAAZ,KAAoBF,QAAQ,CAAClD,OAAO,CAACS,gBAAR,CAAyB0C,UAAzB,EAAoCC,IAApC,CAAD;AAFL,CAAf,CAA3B;;AAKA,eAAenD,UAAU,CAACF,OAAO,CAAC+C,eAAD,EAAkBG,kBAAlB,CAAP,CAA6C9C,SAA7C,CAAD,CAAzB","sourcesContent":["\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Actions } from '../../../actions/index';\r\n// import { ActionTypes } from '../../contants';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { ActionTypes } from '../../../contants';\r\n\r\n\r\n\r\n\r\nclass AddReview extends React.Component {\r\n\r\n  constructor(props) {\r\n\r\n    super(props)\r\n    const { reviewBoard } = this.props;\r\n    const { userDetails } = this.props;\r\n    console.log(this.props, 'constructor AddReviewBoard')\r\n    this.state = {\r\n      productBoardNum: 5,\r\n      customerId: userDetails.userId,\r\n      reviewBoardTitle: '',\r\n      reviewBoardContent: '',\r\n      reviewBoardRating: 3,\r\n      reviewFiles:[]\r\n    }\r\n\r\n    console.log(this.props, ' props 확인 넘어 오는 match 값도 확인')\r\n    this._onChangeInput = this._onChangeInput.bind(this);\r\n    this._onClickAction = this._onClickAction.bind(this);\r\n    this._onChnagereviewBoardRating = this._onChnagereviewBoardRating.bind(this);\r\n    this._onChangeFileUpload = this._onChangeFileUpload.bind(this);\r\n  }\r\n\r\n  _onClickAction=(e)=> {\r\n    const { uploadFileReview }= this.props;\r\n    const reviewBoard = {\r\n      productBoardNum: this.state.productBoardNum,\r\n      customerId: this.state.customerId,\r\n      reviewBoardTitle: this.state.reviewBoardTitle,\r\n      reviewBoardContent: this.state.reviewBoardContent,\r\n      reviewBoardRating: this.state.reviewBoardRating\r\n    }\r\n    const { addReview } = this.props\r\n\r\n    addReview(reviewBoard).then(response =>{\r\n      if(response.type===ActionTypes.ADD_REVIEW_SUCCESS){\r\n        console.log(response,' 성공하고 data')\r\n        let reviewBoardNum = response.payload.data.reviewBoardNum;\r\n        console.log('AddReview Response 확인 ',response)\r\n        uploadFileReview(reviewBoardNum,this.state.reviewFiles).then(response =>{\r\n          if(response.type === ActionTypes.UPLOADFILEREVIEW_SUCCESS){\r\n            console.log(response.type)\r\n            window.close()\r\n          }\r\n        })\r\n      }else\r\n      console.log('Add 실패 한다~!!')\r\n    })\r\n     //window.close()\r\n\r\n  }\r\n  _onChangeInput(event) {\r\n\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n\r\n    console.log(target.name, ' name')\r\n    console.log(value)\r\n\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n\r\n    console.log(this.state, 'this state')\r\n  }\r\n  _onChnagereviewBoardRating(event) {\r\n    console.log('eventddddddddddd', event.target.value)\r\n    let rating = event.target.value;\r\n    if (rating > 5) {\r\n      rating = 5\r\n      alert(' 너무 큰수를 입력하여서 5로 초기화 됨니다.')\r\n      this.setState({\r\n        reviewBoardRating:rating\r\n      })\r\n    } else {\r\n      this.setState({\r\n        reviewBoardRating:rating\r\n      })\r\n    } \r\n  }\r\n  _onChangeFileUpload(event){\r\n    console.log(event.target)\r\n    this.setState({\r\n      reviewFiles:event.target.files[0]\r\n    })\r\n    console.log('onChagneFileUpload 실행',this.state.reviewFiles)\r\n  }\r\n\r\n  render() {\r\n    console.log('render에서 props 찍어보기', this.props)\r\n    return (\r\n      \r\n      <div className=\"container\" role=\"main\">\r\n        <h2>Review 게시판</h2>\r\n        <form onSubmit={this._onClickAction}>\r\n          <div className=\"mb-3\">\r\n            <label >제목</label>\r\n            <input type=\"text\" className=\"form-control\" name=\"reviewBoardTitle\"\r\n              onChange={this._onChangeInput} placeholder=\"제목을 입력해 주세요\" />\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label >작성자</label>\r\n            <div>\r\n              <img src =\"http://localhost:8080/storage/files/0ed289c878d0d08a018e1602369e8adf4bc707206bcc40b95ee48fe37a70ea4d\"/>\r\n              <b>{this.state.customerId} </b>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <input type=\"number\" min=\"1\" max=\"5\" name=\"reviewBoardRating\" onChange={this._onChnagereviewBoardRating}\r\n              className=\"form-control\" placeholder=\"별점을 입력하세요\" />\r\n          </div>\r\n\r\n          <div>\r\n            <label >이미지 올리기</label>\r\n          </div>\r\n          <div>\r\n            <input type=\"file\" accept=\".jpg, .jpeg, .png, .bmp\" name=\"reviewBoardRating\" \r\n               file={this.state.reviewFiles}onChange={this._onChangeFileUpload}/>\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label >내용</label>\r\n            <textarea className=\"form-control\" rows=\"5\" name=\"reviewBoardContent\" id=\"content\"\r\n              onChange={this._onChangeInput} placeholder=\"내용을 입력해 주세요\" ></textarea>\r\n          </div>\r\n\r\n          <div >\r\n            <input type=\"button\" className=\"btn btn-sm btn-primary\"\r\n              name=\"submit\" value=\"저장\" onClick={this._onClickAction} />\r\n            <button type=\"reset\" className=\"btn btn-sm btn-primary\" >목록</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\nconst mapStateToProps = (state) => {\r\n\r\n  const { userDetails } = state.auth;\r\n  const { reviewBoard } = state.board;\r\n  console.log(state, ' mapStateToProps')\r\n\r\n  console.log(reviewBoard, ' <------------  ReviewBoard ')\r\n  console.log(userDetails, ' <----------- userDetails')\r\n  console.log(userDetails.userId, ' <----------- userId')\r\n\r\n  return {\r\n    userDetails,\r\n    reviewBoard\r\n\r\n  };\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  addReview: (reviewBoard) => dispatch(Actions.addReview(reviewBoard)),\r\n  uploadFileReview:(uploadInfo,file) =>dispatch(Actions.uploadFileReview(uploadInfo,file))\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(AddReview));\r\n"]},"metadata":{},"sourceType":"module"}